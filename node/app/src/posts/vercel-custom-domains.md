---
title: 'Vercelに独自ドメイン（サブドメイン）を設定'
date: '2020-03-14'
---

# 概要

Vercel の[公式サイト](https://vercel.com/docs/custom-domains)通りに設定したもののうまくいかず，苦労したので備忘録として残します．

今回設定したサブドメインは[blog.keitaroooo.com](https://blog.keitaroooo.com)です．

# DNS 設定

DNS サーバは IP アドレスとドメイン名を結びつけるもので，以下に示す DNS レコードを設定する必要があります．

#### A レコード

IPv4 でホスト名と IP アドレスの関連付けを定義するレコード

#### AAA レコード

IPv6 でホスト名と IP アドレスの関連付けを定義するレコード

#### CNAME レコード

正規ホスト名に対する別名を定義するレコード

特定のホスト名を別のドメイン名に転送する時などに利用

ドメイン名が`keitaroooo.com`であるとき，ホスト名：`blog`，VALUE：`cname.vercel-dns.com`と入力し，`blog.keitaroooo.com`にアクセスすると`cname.vercel-dns.com`に転送される

# Vercel に独自ドメイン設定

Vercel に独自ドメインを設定する方法は以下のように分けられます.

#### 独自ドメインを取得したサービス（例えばお名前ドットコム）上の DNS サーバを使用する

Apex Domain（サブドメインを含まない，ドメインの最も短い表記）の場合は A レコードを設定

サブドメインの場合は CNAME レコードを設定

#### Vercel の DNS サーバを使用する

独自ドメインを取得したサービスでネームサーバに Vercel の DNS サーバを指定

```
ns1.vercel-dns.com
ns2.vercel-dns.com
```

Vercel の DNS サーバで A レコードを設定する

# うまくいかなかった理由

公式サイト通りに設定したつもりだったので正直よく分からないです．

起きていた問題としては，設定したドメインにアクセスするとお名前ドットコムのページが出てくる状態でした．

原因として，Vercel の DNS サーバに接続できていないことが考えられたのですが，お名前ドットコム側のネームサーバの設定も問題なく，Vercel 側でも Valid Configuration となっていたので，詰まってしまいました．

# 解決策

設定するドメインとしてサブドメインを設定していたので，Apex ドメインで設定してみました．すると，そのドメインでサイトが表示されました．

その後，再度サブドメインを設定すると，うまくいきました．
原因がよく分からずもやもやしますが，一応解決したので良かったです．

# 参考文献

[お名前ドットコム](https://help.onamae.com/answer/7883)
